generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model autorole {
  guildId          String   @id
  activated        Boolean  @default(false)
  roleIds          String[] @default([])
  moderatorTag     String?
  moderatorId      String?
  discordTimestamp String?
}

model giveawayWinner {
  winnerId   Int             @id @default(autoincrement())
  userId     String
  giveawayId Int
  prizes     giveawayPrize[]
  accepted   Boolean         @default(false)

  @@unique([userId, giveawayId])
}

model giveawayPrize {
  prizeId        Int            @id @default(autoincrement())
  giveaway       giveaway?      @relation(fields: [giveawayId], references: [giveawayId])
  giveawayId     Int
  winner         giveawayWinner? @relation(fields: [winnerId], references: [winnerId])
  winnerId       Int?
  name           String
  amount         Int            @default(1)
  additionalInfo String?
}

model giveaway {
  giveawayId          Int             @id @default(autoincrement())
  guildRelativeId     Int
  giveawayTitle       String
  giveawayDescription String?
  hostUserId          String
  hostUserTag         String
  guildId             String
  channelId           String?
  messageId           String?
  active              Boolean         @default(true)
  lockEntries         Boolean         @default(false)
  requiredRoles       String[]        @default([])
  rolesToPing         String[]        @default([])
  minimumAccountAge   String?
  prizes              giveawayPrize[]
  lastEditedUserId    String?
  lastEditedUserTag   String?
  lastEditedTimestamp String?
  createdTimestamp    String
  endTimestamp        String?
  userEntriesIds      String[]        @default([])
  numberOfWinners     Int             @default(1)
  winnerMessageId     String?
  winnerUserIds       String[]        @default([])
}
